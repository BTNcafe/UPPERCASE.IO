global.PACKER=function(){"use strict";var E=require("fs"),R=require("path"),S=__dirname,n=process.argv[2],O="",e="",r="",i="",_=function(E){console.log("PACKER: "+E)},C=function(R){var n=R.path,O=R.name;return E.statSync(S+"/"+n).isDirectory()===!0&&"."!==O[0]&&"node_modules"!==O&&"not_load"!==O&&"deprecated"!==O&&"_"!==O[0]},c=function(R,S){E.statSync(R).isDirectory()===!0?(E.mkdirSync(S),E.readdirSync(R).forEach(function(E){"."!==E[0]&&c(R+"/"+E,S+"/"+E)})):E.createReadStream(R).pipe(E.createWriteStream(S))},t=function(R,S){E.writeFileSync(R,S)},o=function(R,n){var O,e;if(E.existsSync(R)===!0)for(O=[],E.readdirSync(R).forEach(function(e){var r=R+"/"+e;C({path:r,name:e})===!0?O.push(r):E.statSync(S+"/"+r).isDirectory()!==!0&&n(r)}),e=0;e<O.length;e+=1)o(O[e],n)},A=function(R){E.readdirSync(n).forEach(function(E){"."!==E[0]&&"BROWSER"!==E&&"BROWSER_SECURED"!==E&&"COMMON"!==E&&"SERVER"!==E&&R(n+"/"+E)})},D=function(n){var e=S+"/"+n,r=R.extname(n),i=E.readFileSync(e);".js"===r?O+=i+"\n":".__UPPERCASE_IO_COMPILED"===r&&(O+=i+"\n")},a=function(n){var O=S+"/"+n,r=R.extname(n),i=E.readFileSync(O);".js"===r?e+=i+"\n":".__UPPERCASE_IO_COMPILED"===r&&(e+=i+"\n")},P=function(n){var O=S+"/"+n,e=R.extname(n),i=E.readFileSync(O);".js"===e?r+=i+"\n":".__UPPERCASE_IO_COMPILED"===e&&(r+=i+"\n")},d=function(n){var O=S+"/"+n,e=R.extname(n),r=E.readFileSync(O);".js"===e?i+=r+"\n":".__UPPERCASE_IO_COMPILED"===e&&(i+=r+"\n")},s=function(){var E=require(S+"/UPPERCASE.IO/SERVER/node_modules/uglify-js");O=E.minify(O,{fromString:!0,mangle:!0}).code,e=E.minify(e,{fromString:!0,mangle:!0}).code,r=E.minify(r,{fromString:!0,mangle:!0}).code,i=E.minify(i,{fromString:!0,mangle:!0}).code};_("PACKING BOX ["+n+"]..."),_("CREATING FOLDER..."),E.mkdirSync("__PACK/"+n),_("CREATED FOLDER!"),_("LOADING BOX..."),_("LOADING FOR BROWSER..."),o(n+"/BROWSER",D),_("LOADED FOR BROWSER!"),_("LOADING FOR BROWSER SECURED..."),o(n+"/BROWSER_SECURED",a),_("LOADED FOR BROWSER SECURED!"),_("LOADING FOR COMMON..."),o(n+"/COMMON",P),_("LOADED FOR COMMON!"),_("LOADING FOR SERVER..."),o(n+"/SERVER",d),_("LOADED FOR SERVER!"),_("LOADED BOX!"),_("MINIFYING..."),s(),_("MINIFYED!"),_("SAVING BOX..."),A(function(E){c(E,"__PACK/"+n+"/"+E.substring(n.length+1))}),""!==O&&(_("SAVING BROWSER SCRIPT..."),E.mkdirSync("__PACK/"+n+"/BROWSER"),t("__PACK/"+n+"/BROWSER/BROWSER.js",O),_("SAVED BROWSER SCRIPT!")),""!==e&&(_("SAVING BROWSER SECURED SCRIPT..."),E.mkdirSync("__PACK/"+n+"/BROWSER_SECURED"),t("__PACK/"+n+"/BROWSER_SECURED/BROWSER_SECURED.js",e),_("SAVED BROWSER SECURED SCRIPT!")),""!==r&&(_("SAVING COMMON SCRIPT..."),E.mkdirSync("__PACK/"+n+"/COMMON"),t("__PACK/"+n+"/COMMON/COMMON.js",r),_("SAVED COMMON SCRIPT!")),""!==i&&(_("SAVING SERVER SCRIPT..."),E.mkdirSync("__PACK/"+n+"/SERVER"),t("__PACK/"+n+"/SERVER/SERVER.js",i),_("SAVED SERVER SCRIPT!")),E.existsSync(n+"/SERVER/node_modules")===!0&&(_("SAVING NODE MODULES..."),E.existsSync("__PACK/"+n+"/SERVER")===!1&&E.mkdirSync("__PACK/"+n+"/SERVER"),c(n+"/SERVER/node_modules","__PACK/"+n+"/SERVER/node_modules"),_("SAVED NODE MODULES!")),_("SAVED BOX!"),_("PACKED BOX ["+n+"]!")},PACKER();