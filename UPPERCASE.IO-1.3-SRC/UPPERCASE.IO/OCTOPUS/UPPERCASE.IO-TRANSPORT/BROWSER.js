global.CONNECT_TO_WEB_SOCKET_SERVER=CONNECT_TO_WEB_SOCKET_SERVER=METHOD({run:function(o,n){"use strict";var E,t,_,e,i,C,a,c,d,u=void 0===o.host?global.location.hostname:u,O=o.port,T={};CHECK_IS_DATA(n)!==!0?E=n:(E=n.success,t=n.error),d=function(o,n){var E=T[o];void 0!==E&&EACH(E,function(E){E(n,function(n){void 0!==c&&c({methodName:"__CALLBACK_"+o,data:n})})})},_=new WebSocket("ws://"+u+":"+O),_.onopen=function(){e=!0,E(C=function(o,n){var E=T[o];void 0===E&&(E=T[o]=[]),E.push(n)},a=function(o,n){var E=T[o];void 0!==E&&(void 0!==n?REMOVE({data:E,value:n}):delete T[o])},c=function(o,n){var E=o.methodName;_.send(STRINGIFY(o)),void 0!==n&&C("__CALLBACK_"+E,function(o){n(o),a("__CALLBACK_"+E)})},function(){i=!0,_.close()})},_.onmessage=function(o){var n=PARSE_STR(o.data);void 0!==n&&d(n.methodName,n.data)},_.onclose=function(){i!==!0&&d("__DISCONNECTED")},_.onerror=function(o){e!==!0?(console.log("[UPPERCASE.IO-CONNECT_TO_WEB_SOCKET_SERVER] CONNECT TO WEB SOCKET SERVER FAILED:",o),void 0!==t&&t(o)):d("__ERROR",o)}}});