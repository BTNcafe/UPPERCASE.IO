global.CONNECT_TO_WEB_SOCKET_SERVER=CONNECT_TO_WEB_SOCKET_SERVER=METHOD(function(e){"use strict";var o,t,n,i=1e3,c=7,r=0,E=0,v={},d={};return e.request=o=function(e,o){var t=d[e],n=t.contentPieces,i="http://"+t.host+":"+t.port+(void 0===t.clientId?"?":"?clientId="+t.clientId+"&")+"connectionKey="+t.connectionKey+"&requestKey="+e;void 0!==t.script&&t.script.remove(),0===n.length?i+="&isEnd=true":(i+="&content="+n[0],REMOVE({data:n,key:0})),t.script=LOAD(i);try{t.script.getEl().onerror=o}catch(c){}},e.removeRequestInfo=t=function(e){var o=d[e];o.script.remove(),delete o.script,delete d[e]},e.response=n=function(e){var o=PARSE_STR(e);v[o.connectionKey](o.clientId,o.params),t(o.requestKey)},{run:function(e,t){var n,s,u,_,a,C,f,N,O=void 0===e.host?global.location.hostname:O,T=e.fixServerPort,l=r,I={},S=function(e,t,n){var c,r;if(d[E]={host:O,port:T,clientId:e,connectionKey:t,contentPieces:r=[]},void 0!==n)for(c=encodeURIComponent(STRINGIFY(n));""!==c;)r.push(c.substring(0,i)),c=c.substring(i);o(E,function(){m("__DISCONNECTED")}),E+=1},m=function(e,o){var t;a!==!0&&(t=I[e],void 0!==t&&EACH(t,function(t){t(o,function(o){void 0!==N&&N({methodName:"__CALLBACK_"+e,data:o})})}),"__DISCONNECTED"===e&&(void 0!==_&&_.remove(),a=!0))};CHECK_IS_DATA(t)!==!0?n=t:(n=t.success,s=t.error),u=DELAY(5,function(){var e={};console.log("[UPPERCASE.IO-CONNECT_TO_WEB_SOCKET_SERVER (FIX)] CONNECT TO WEB SOCKET FIX SERVER FAILED:",e),void 0!==s&&s(e)}),v[l]=function(e,o){void 0!==u?(u.remove(),u=void 0,n(C=function(e,o){var t=I[e];void 0===t&&(t=I[e]=[]),t.push(o)},f=function(e,o){var t=I[e];void 0!==t&&(void 0!==o?REMOVE({data:t,value:o}):delete I[e])},N=function(o,t){var n=o.methodName;S(e,l,o),void 0!==t&&C("__CALLBACK_"+n,function(e){t(e),f("__CALLBACK_"+n)})},function(){S(e,l,{methodName:"__DISCONNECTED"}),a=!0})):void 0!==o&&m(o.methodName,o.data),void 0!==_&&_.remove(),a!==!0&&(_=DELAY(c,function(){m("__DISCONNECTED")}),S(e,l))},S(void 0,l),r+=1}}});